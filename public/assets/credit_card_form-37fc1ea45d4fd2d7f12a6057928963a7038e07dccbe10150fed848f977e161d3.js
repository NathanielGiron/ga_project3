function GetURLParameter(e){for(var a=window.location.search.substring(1),t=a.split("&"),r=0;r<t.length;r++){var i=t[r].split("=");if(i[0]==e)return i[1]}}$(document).ready(function(){var e,a,t;t=function(t){var r=$(t.target);return r.find("input[type=submit]").prop("disabled",!0),Stripe?Stripe.card.createToken(r,a):e("Failed to load credit card functionality. Please reload the page."),!1},$(".cc_form").on("submit",t);var r=function(e,a){var r=$(a);void 0==e&&(e=$("#tenant_plan :selected").val()),"premium"===e?($("[data-stripe]").prop("required",!0),r.off("submit"),r.on("submit",t),$("[data-stripe]").show()):($("[data-stripe]").hide(),r.off("submit"),$("[data-stripe]").removeProp("required"))};$("#tenant_plan").on("change",function(){r($("#tenant_plan :selected").val(),".cc_form")}),r(GetURLParameter("plan"),".cc_form"),a=function(a,t){var r,i;return i=$(".cc_form"),t.error?(console.log(t.error.message),e(t.error.message),i.find("input[type=submit]").prop("disabled",!1)):(r=t.id,i.append($('<input type="hidden" name="payment[token]" />').val(r)),$("[data-stripe=number]").remove(),$("[data-stripe=cvv]").remove(),$("[data-stripe=exp-year]").remove(),$("[data-stripe=exp-month]").remove(),$("[data-stripe=label]").remove(),i.get(0).submit()),!1},e=function(e){return $("#flash-messages").size()<1&&$("div.container.main div:first").prepend("<div id='flash-messages'></div>"),$("#flash-messages").html('<div class="alert alert-warning"><a class="close" data-dismiss="alert">\xd7</a><div id="flash_alert">'+e+"</div></div>"),$(".alert").delay(5e3).fadeOut(3e3),!1}});